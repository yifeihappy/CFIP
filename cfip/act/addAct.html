<!DOCTYPE html>
<html lang="en">

	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
		<meta name="description" content="">
		<meta name="author" content="">

		<title>Off Canvas Template for Bootstrap</title>

		<!-- Bootstrap core CSS -->
		<link href="../../css/bootstrap.min.css" rel="stylesheet">

		<!-- Custom styles for this template -->
		<link href="../../css/dyf/index.css" rel="stylesheet">
		<script src="../../jquery/jquery-3.2.1.min.js " type="text/javascript"></script>
		<script src="../../js/bootstrap.min.js" type="text/javascript"></script>
		<script src="../../js/dyf/user.js"></script>
	</head>

	<body>
		<nav class="navbar navbar-fixed-top navbar-inverse">
			<div class="container">
				<div class="navbar-header">
					<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
					<div class="nav navbar-nav navbar-header">
						<li>
							<img src="../../img/logo.png" width="44px" height="44px" />
						</li>
						<li>
							<a href="#" style="text-decoration:none">CPFI</a>
						</li>
					</div>
				</div>
				<div id="navbar" class="collapse navbar-collapse">
					<ul class="nav navbar-nav">
						<li>
							<a href="#">Chat</a>
						</li>
						<!--<li>
							<a href="../act/act.html">活动</a>
						</li>-->
						<li class="dropdown">
							<a href="act.html" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">活动 <span class="caret"></span></a>
							<ul class="dropdown-menu">
								<li>
									<a href="#">比赛</a>
								</li>
								<li>
									<a href="#">公益</a>
								</li>
								<li>
									<a href="#">户外</a>
								</li>
								<li>
									<a href="#">讲座</a>
								</li>
								<li>
									<a href="#">艺术</a>
								</li>
								<li>
									<a href="#">游学</a>
								</li>
								<li>
									<a href="#">招聘</a>
								</li>
								<li>
									<a href="#">招新</a>
								</li>
								<li role="separator" class="divider"></li>
								<li>
									<a href="#">其它</a>
								</li>
							</ul>
						</li>
						<li>
							<a href="../topic/topic.html">话题</a>
						</li>
						<li>
							<a href="../dengshen/xinyuanqiang.html">灯神</a>
						</li>
						<!--<li class="dropdown">
										<a href="act.html" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">活动 <span class="caret"></span></a>
										<ul class="dropdown-menu">
											<li>
												<a href="#">比赛</a>
											</li>
											<li>
												<a href="#">公益</a>
											</li>
											<li>
												<a href="#">户外</a>
											</li>
											<li>
												<a href="#">讲座</a>
											</li>
											<li>
												<a href="#">艺术</a>
											</li>
											<li>
												<a href="#">游学</a>
											</li>
											<li>
												<a href="#">招聘</a>
											</li>
											<li>
												<a href="#">招新</a>
											</li>
											<li role="separator" class="divider"></li>
											<li>
												<a href="#">其它</a>
											</li>
										</ul>
									</li>-->
						<!--<li class="dropdown">
							<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">话题<span class="caret"></span></a>
							<ul class="dropdown-menu">
								<li>
									<a href="#">明星</a>
								</li>
								<li>
									<a href="#">搞笑</a>
								</li>
								<li>
									<a href="#">情感</a>
								</li>
								<li>
									<a href="#">时尚</a>
								</li>
								<li>
									<a href="#">军事</a>
								</li>
								<li>
									<a href="#">美女</a>
								</li>
								<li>
									<a href="#">体育</a>
								</li>
								<li>
									<a href="#">动漫</a>
								</li>
								<li role="separator" class="divider"></li>
								<li>
									<a href="#">其它</a>
								</li>
							</ul>
						</li>-->
						<!--<li class="dropdown">
							<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">灯神<span class="caret"></span></a>
							<ul class="dropdown-menu">
								<li>
									<a href="#">表白墙</a>
								</li>
								<li>
									<a href="#">心愿墙</a>
								</li>
								<li>
									<a href="#">闲物店</a>
								</li>
							</ul>
						</li>-->
					</ul>

					<form class="navbar-form navbar-left">
						<div class="form-group">
							<input type="text" class="form-control" placeholder="活动/话题">
						</div>
						<button type="submit" class="btn btn-default">搜索</button>
					</form>

					<ul class="nav navbar-nav navbar-right " ng-if="!userService.isLogin">
						<!--<div id="signinDiv" hidden=true>-->
						<li id="signinLI">
							<a href="/CFIP/cfip/user/signin.html">登录</a>
						</li>
						<!--</div>-->
						<!--<div id="signupDiv" hidden=true>-->
						<li id="signupLI" ng-hide="userService.isLogin">
							<a href="/CFIP/cfip/user/signup.html">注册</a>
						</li>
						<!--</div>-->
						<!--<div id="userCenterDiv" hidden=true>-->
						<li id="userCenterLI" class="dropdown">
							<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">
								<span class="glyphicon glyphicon-user" aria-hidden="true"></span><span class="caret"></span></a>
							<ul class="dropdown-menu">
								<li>
									<a>个人中心</a>
								</li>
								<li>
									<a href="/CFIP/index.html">退出</a>
								</li>
							</ul>
						</li>
						<!--</div>-->
						<!--<div id="publishDiv" hidden=true>-->
						<li id="publishLI" class="dropdown">
							<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">
								<span class="glyphicon glyphicon-plus" aria-hidden="true"></span>发布<span class="caret"></span></a>
							<ul class="dropdown-menu">
								<li>
									<a href="#">活动</a>
								</li>
								<li>
									<a href="#">话题</a>
								</li>
								<li role="separator" class="divider"></li>
								<li>
									<a href="#">心愿</a>
								</li>
								<li>
									<a href="#">表白</a>
								</li>
								<li>
									<a href="#">闲物</a>
								</li>
							</ul>
						</li>
						<!--</div>-->

					</ul>
				</div>
				<!-- /.nav-collapse -->
			</div>
			<!-- /.container -->
		</nav>
		<!-- /.navbar -->

		<div class="container">
			<div class="row">
				<div class="col-md-8 col-md-offset-2">
					<form>
						<div class="form-group">
							<input type="text" class="form-control" id="actName" placeholder="活动名称">
						</div>
						<div class="form-group">
							<input type="text" class="form-control" id="actAddress" placeholder="活动地址">
						</div>
						<div class="form-group">
							<input type="text" class="form-control" id="actSponser" placeholder="主办方">
						</div>
						<div class="form-group">
							<select id="actType" class="form-control" required>
								<!-- ngRepeat: t in actTypeLists -->
								<option value="1">
									招新
								</option>
								<!-- end ngRepeat: t in actTypeLists -->
								<option value="2">
									讲座
								</option>
								<!-- end ngRepeat: t in actTypeLists -->
								<option value="3">
									艺术
								</option>
								<!-- end ngRepeat: t in actTypeLists -->
								<option value="4">
									户外
								</option>
								<!-- end ngRepeat: t in actTypeLists -->
								<option value="5">
									招聘
								</option>
								<!-- end ngRepeat: t in actTypeLists -->
								<option value="6">
									游学
								</option>
								<!-- end ngRepeat: t in actTypeLists -->
								<option value="7">
									比赛
								</option>
								<!-- end ngRepeat: t in actTypeLists -->
								<option value="8">
									公益
								</option>
								<!-- end ngRepeat: t in actTypeLists -->
								<option value="9">
									其他
								</option>
								<!-- end ngRepeat: t in actTypeLists -->
							</select>
						</div>
						<div class="form-group">
							<label>活动开始时间</label>
							<input type="datetime-local" class="form-control" id="actStart" />
						</div>
						<div class="form-group">
							<label>活动结束时间</label>
							<input type="datetime-local" class="form-control" id="actEnd" />
						</div>
						<div class="form-group">
							<label>报名开始时间</label>
							<input type="datetime-local" class="form-control" id="applystart" />
						</div>
						<div class="form-group">
							<label>报名结束时间</label>
							<input type="datetime-local" class="form-control" id="applyEnd" />
						</div>
						<div class="form-group">
							<label>活动海报</label>
							<input type="file" class="form-control" id="actImg" placeholder="主办方">
						</div>
						<div class="form-group">
							<label>活动简介</label>
							<textarea class="form-control" rows="6" id="actBrief"></textarea>
						</div>
						<div class="form-group">
							<input type="number" class="form-control" id="totalNumber" min="0" max="10000" placeholder="活动总人数" />
						</div>
						<button id="addActSubmit" class="btn btn-lg btn-primary btn-block">Submit</button>
					</form>
				</div>
			</div>
		</div>

		<!-- Bootstrap core JavaScript
    ================================================== -->
		<!-- Placed at the end of the document so the pages load faster -->

		<script>
			$(document).ready(function() {
				$("#addActSubmit").click(function() {
					//					var actObject = {
					//						actname: "Hip Hop Music",
					//						actaddress:"JingJingTang",
					//						userid:1513417478927,
					//						actsponser:"KangKang",
					//						acttype:"1",
					//						actstart:"2017-12-22T12:00",
					//						actend:"2017-12-22T17:00",
					//						applystart:"2017-12-22T12:00",
					//						applyend:"2017-12-17T12:00",
					//						actbrief:"2017-12-21T12:00",
					//						totalnumber:100,
					//						participantnumber:1,
					//						viewernumber:2
					//					}
					var actObject = {
						actname: $("#actName").val(),
						actaddress: $("#actAddress").val(),
						userid: 1513417478927,
						actsponser: $("#actSponser").val(),
						acttype: $("#actType").val(),
						actstart: $("#actStart").val(),
						actend: $("#actEnd").val(),
						applystart: $("#applystart").val(),
						applyend: $("#applyEnd").val(),
						actbrief: $("#actBrief").val(),
						totalnumber: parseInt($("#totalNumber").val()),
						participantnumber: 0,
						viewernumber: 0
					};
					var dataJsonStr = JSON.stringify(actObject);
					//console.log(dataJsonStr);
					$.ajax({
						type: "post",
						url: "http://112.74.35.75:8080/Entity/U3d616b41047817/CFIP/Activity/",
						async: false,
						data: dataJsonStr,
						contentType: "application/json",
						success: function(data, state) {
							console.log(state);
							console.log(data);
							console.log(data.id);

							var files = $(":file")[0].files;
							var formData = new FormData();
							formData.append("file", files[0]);
							$.ajax({
								//http://112.74.35.75:8080/file/U3d616b41047817/CFIP/Activity/1513472664404
								url: "http://112.74.35.75:8080/Entity/U3d616b41047817/CFIP/Activity/" + data.id,
								type: "POST",
								data: formData,
								async: false,
								contentType: false,
								processData: false,
								error: function(dataImg, stateImg) {
									console.log(stateImg);
									console.log(dataImg);
									//return false;
								},
								success: function(dataImg, stateImg) {
									console.log(stateImg);
									console.log(dataImg);
								}
							});
						},
						error: function(data, state) {
							console.log(data);
							console.log(state);
						}
					});
				});
			});
		</script>
	</body>

</html>